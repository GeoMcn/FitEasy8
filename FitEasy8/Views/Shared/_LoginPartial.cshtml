@model FitEasy8.ViewModels.LoginViewModel
@using Microsoft.AspNet.Identity
@using (Ajax.BeginForm("_LoginPartial", "Account", FormMethod.Post, new AjaxOptions { OnSuccess = "OnSuccessLoginPopup", OnFailure = "OnSuccessLoginPopup", UpdateTargetId = "loginpopup", InsertionMode = InsertionMode.Replace }))
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="returnUrl" id="returnUrl" />
    <div class="loginBox" id="loginPoupForm">
        <div class="closepop">
        </div>
        <h1>Log In</h1>
        <h4 style="color:green;text-align:center">@TempData["EmailVarifiedMsg"]</h4>
        <div class="loginconentBox">
            <div class="cstmText">
                @Html.TextBoxFor(m => m.UserName, new { @class = "inputmsg", @placeholder = "EmailAddress", @onkeypress = "return OnlyLegalCharacters();" })
                @Html.ValidationMessageFor(m => m.UserName)
            </div>
            <div class="cstmText">
                @Html.TextBoxFor(m => m.Password, new { @class = "inputlock", @type = "Password", @placeholder = "Password", @onkeypress = "return OnlyLegalCharacters();" })
                @Html.ValidationMessageFor(m => m.Password)
            </div>
            <div class="cstmText clearfix">
                <div class="checkboxLeft">
                    @Html.CheckBoxFor(m => m.RememberMe, new { @class = "LoginCheckbox" })
                    RememberMe
                </div>
                <div class="checkboxRight">
                    <a href="/account/forgotpassword" class="forgotPass"> Forgot Password?</a>
                </div>
            </div>
            <div class="cstmText">
                <input type="submit" class="loginBtn_Submit" value="Log In" />
            </div>
        </div>
    </div> }
<script>
     function InitializeCloseLoginPopup() {
    $(".closepop").click(function () {
     $("#loginpopup").fadeOut(400);
    $("body").removeClass("loghiddens");
    $("#loginpopup").fadeOut(400);
    });
    }
    function OnSuccessLoginPopup() {
             InitializeCloseLoginPopup();
      if ('@ViewBag.redirectUrl' != '') {
    window.location.href = '@Html.Raw(ViewBag.redirectUrl)';
      }
      }
</script>





























@*@using Microsoft.AspNet.Identity
    @if (Request.IsAuthenticated)
    {
        using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
        {
            @Html.AntiForgeryToken()

            <ul class="nav navbar-nav navbar-right">
                <li>
                    @Html.ActionLink("Hello " + User.Identity.GetUserName() + "!", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage" })
                </li>
                <li><a href="javascript:document.getElementById('logoutForm').submit()">Log off</a></li>
            </ul>
        }
    }
    else
    {
        <ul class="nav navbar-nav navbar-right">
            <li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>
            <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>
        </ul>
    }*@

